const pythonContent = [
  { type: "video", title: "To'liq Python FreeCodeCamp kursi", url: "https://www.youtube.com/embed/8DvywoWv6fI?si=b24aTl_HaMsoz1PE" },
  { type: "video", title: "Python Bro code", url: "https://www.youtube.com/embed/ix9cRaBkVe0?si=T7vIftiVKdS4_eSp" },
  { type: "video", title: "Mosh Python", url: "https://www.youtube.com/embed/_uQrJ0TkZlc?si=3cODblwXGrqv6EYQ" },
  { type: "video", title: "Harvard Python", url: "https://www.youtube.com/embed/nLRL_NcnK-4?si=Da4rDRXooLCx3RIN" },
  { type: "playlist", title: "Corey Schefer Python kursi", url: "https://www.youtube.com/embed/videoseries?si=Fdmubzxk6EGCVo1M&amp;list=PL-osiE80TeTt2d9bfVyTiXJA-UTHn6WwU" },
  { type: "playlist", title: "Corey Schefer Python kursi", url: "https://www.youtube.com/embed/videoseries?si=Fdmubzxk6EGCVo1M&amp;list=PL-osiE80TeTt2d9bfVyTiXJA-UTHn6WwU" }
];

const cppContent = [
  { type: "video", title: "C++ Bro code", url: "https://www.youtube.com/embed/-TkoO8Z07hI?si=zGuA-T-SmxWM9s3T" },
  { type: "video", title: "C++ FreeCodeCamp 31 hours", url: "https://www.youtube.com/embed/8jLOx1hD3_o?si=HLs__whyngKObaUX" },
  { type: "playlist", title: "C++ The Cherno Playlist", url: "https://www.youtube.com/embed/videoseries?si=kQunn6mJnGZektRt&amp;list=PLlrATfBNZ98dudnM48yfGUldqGD0S4FFb" }
];

const goContent = [
  { type: "video", title: "GO Dasturlash 1", url: "https://www.youtube.com/embed/YS4e4q9oBaU" },
  { type: "video", title: "GO FreeCodeCamp", url: "https://www.youtube.com/embed/un6ZyFkqFKo?si=6Ed9-qA9hXMKucL6" },
  { type: "video", title: "GO with nana", url: "https://www.youtube.com/embed/yyUHQIec83I?si=k1o3j6GLr-0TckZX" }
];
const frontendContent = [
  { type: "video", title: "Javascript full course", url: "https://www.youtube.com/embed/EerdGm-ehJQ?si=StkGSvlB_bf1ocVg" },
  { type: "video", title: "Javascript FreeCode Camp", url: "https://www.youtube.com/embed/PkZNo7MFNFg?si=OkMWWE-OtdL62gBt" },
  { type: "video", title: "HTML Full Course", url: "https://www.youtube.com/embed/pQN-pnXPaVg?si=Z4bX4rYF3Yk1v0mM" },
  { type: "video", title: "CSS Full Course", url: "https://www.youtube.com/embed/1Rs2ND1ryYc?si=ZkXHjv8b0YH3qf1J" },
  { type: "playlist", title: "React JS FreeCodeCamp", url: "https://www.youtube.com/embed/videoseries?si=134Jc7SItPBnUyN0&amp;list=PL4-IK0AVhVjOJs_UjdQeyEZ_cmEV3uJvx" },
  { type: "playlist", title: "Vue JS The Net Ninja", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL4cUxeGkcC9gZD-Tvwfod2gaISzfRiP9d" },
  { type: "playlist", title: "Angular The Net Ninja", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL4cUxeGkcC9i0_2FF-WhtRIfIJ1lXlTZR" },
  { type: "playlist", title: "Tailwind CSS The Net Ninja", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL4cUxeGkcC9gQeDH6xYhmO-db2mhoTSrT" },
  { type: "playlist", title: "Next JS The Net Ninja", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL4cUxeGkcC9jLYyp2Aoh6hcWuxFDX6PBJ" },
  { type: "playlist", title: "Javascript with BRO Code", url: "https://www.youtube.com/embed/lfmg-EJ8gm4?si=L_2vcZ6uBSARw7ID" },
  { type: "playlist", title: "Bootstrap The Net Ninja", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL4cUxeGkcC9i0_2FF-WhtRIfIJ1lXlTZR" },
  { type: "playlist", title: "Web Development The Net Ninja", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL4cUxeGkcC9gZD-Tvwfod2gaISzfRiP9d" },
];
const moreCodingContent = [
  { type: "playlist", title: "Algoritmlar Playlist", url: "https://www.youtube.com/embed/videoseries?list=PLUl4u3cNGP61Oq3tWYp6V_F-5jb5L2iHb" },
  { type: "video", title: "Git & GitHub", url: "https://www.youtube.com/embed/RGOj5yH7evk" },
  { type: "playlist", title: "Git", url: "https://www.youtube.com/embed/videoseries?si=BfUQo4wjmCnlo7zl&amp;list=PLfU9XN7w4tFwKwh_xPSQ_X1-hROQEpHnM" }
];

const podcastContent = [
  { type: "podcast", title: "Podcast Ep1", url: "https://www.youtube.com/embed/GqsA7DYn5BA?si=Qp-MAZQyyKd2XBkK" },
  { type: "podcast", title: "Podcast Ep2", url: "https://www.youtube.com/embed/videoseries?si=gfa98Bl4MbSzUdj7&amp;list=PLk1Sqn_f33KuWf3tW9BBe_4TP7x8l0m3T" },
  { type: "podcast", title: "Podcast Ep3", url: "https://www.youtube.com/embed/videoseries?si=Tvjc9qBdbevDFC_4&amp;list=PLcetZ6gSk96-8vlsfui2jrM0CAJ4MfrMT" },
  { type: "podcast", title: "Podcast Ep4", url: "https://www.youtube.com/embed/videoseries?si=6JrVEjypdyuhIzOE&amp;list=PLcetZ6gSk96-FECmH9l7Vlx5VDigvgZpt" },
  { type: "podcast", title: "Podcast Ep5", url: "https://www.youtube.com/embed/videoseries?si=FhdTewtFnWad2bPY&amp;list=PLcetZ6gSk9692J5Mq2pY4siPVbMCu4v6c" },
  { type: "podcast", title: "Podcast Ep6", url: "https://www.youtube.com/embed/videoseries?si=9UjeitqMavu8TqXm&amp;list=PLcetZ6gSk96-GbYhcN0KkFtIL8LJPOG5x" }
];

const movieContent = [
  { type: "movie", title: "Gen V", url: "https://ororo.tv/en/shows/gen-v" },
  { type: "movie", title: "The Boys", url: "https://ororo.tv/en/shows/the-boys" },
  { type: "movie", title: "I2 broke girls", url: "https://ororo.tv/en/shows/2-broke-girls" },
  { type: "movie", title: "Smallville", url: "https://ororo.tv/en/shows/smallville" },
  { type: "movie", title: "The Flesh", url: "https://ororo.tv/en/shows/the-flash" },
  { type: "movie", title: "Tulsa king", url: "https://fmoviesunblocked.net/spa/videoPlayPage/movies/tulsa-king-MsmATkU0Mg6?id=5262873104975547168&type=/movie/detail&lang=en" },
];

const englishMathContent = [
  { type: "video", title: "Algebra Basics", url: "https://www.youtube.com/embed/videoseries?si=EdOpAcQqZPqv_3re&amp;list=PL4NAnWzoDXCtPnghJCJ6wEaEjfy7JaExz" },
  { type: "playlist", title: "Math course 193", url: "https://www.youtube.com/embed/videoseries?si=NhVRRote9PZQKdwW&amp;list=PLybg94GvOJ9FoGQeUMFZ4SWZsr30jlUYK" },
  { type: "playlist", title: "white book", url: "https://www.youtube.com/embed/videoseries?si=Ybb1A9SIwGEmyo_V&amp;list=PLW6qNC33AMvs0Wb_fnW46iANh77Jyifhn" },
  { type: "playlist", title: "PatrickJMT Math", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PLF797E961509B4EB5" },
  { type: "playlist", title: "Maths with Jay", url: "https://www.youtube.com/embed/videoseries?si=ZtH3rX1n1b0JHf6J&amp;list=PL8dPuuaLjXtOfse2ncvffeelTrqvhrz8H" }
];
const generalContent = [
];

// BOOKS SECTION — Barron's Math included!
const bookContent = [
  {
    type: "book",
    title: "Barron's Math",
    author: "Umutcan Gülener",
    url: "https://www.scribd.com/embeds/723217541/content?start_page=1&view_mode=scroll&access_key=key-h89173a9rHDe4TTPPQH6",
    documentUrl: "https://www.scribd.com/document/723217541/Barron-s-Math#from_embed",
    authorUrl: "https://www.scribd.com/user/581666489/Umutcan-Gulener#from_embed"
  }
];

// Load section content into grid
function loadSection(title, contentArray) {
  document.getElementById('section-title').innerText = title;
  const grid = document.getElementById('video-grid');
  grid.innerHTML = '';

  if (contentArray.length === 0) {
    grid.innerHTML = '<p class="empty-message">No content available.</p>';
    return;
  }

  contentArray.forEach(item => {
    const card = document.createElement('div');
    card.className = 'video-card';
    
    let tagClass, tagText;
    if (item.type === 'playlist') {
      tagClass = 'tag-playlist';
      tagText = 'Playlist';
    } else if (item.type === 'book') {
      tagClass = 'tag-book';
      tagText = 'Kitob';
    } else if (item.type === 'movie') {
      tagClass = 'tag-movie';
      tagText = 'Movie';
    } else {
      tagClass = 'tag-video';
      tagText = 'Video';
    }

    let embedContent = '';
    if (item.type === 'book') {
      embedContent = `
        <iframe class="video-player" src="${item.url}" frameborder="0" scrolling="no"></iframe>
        <div style="margin-top: 8px; font-size: 12px; color: var(--text-color);">
          <a href="${item.documentUrl}" target="_blank" style="color: #098642; text-decoration: underline;">${item.title}</a> by 
          <a href="${item.authorUrl}" target="_blank" style="color: #098642; text-decoration: underline;">${item.author}</a>
        </div>
      `;
    } else if (item.type === 'movie') {
      embedContent = `
        <div class="movie-placeholder">
          <a href="${item.url}" target="_blank" class="movie-link">Watch ${item.title} on External Site</a>
        </div>
      `;
    } else {
      embedContent = `
        <iframe class="video-player" src="${item.url}" frameborder="0" allowfullscreen></iframe>
      `;
    }

    card.innerHTML = `
      <span class="tag ${tagClass}">${tagText}</span>
      <h4>${item.title}</h4>
      ${embedContent}
    `;

    card.onclick = () => playVideo(item.title, item.url, item.type, item);
    grid.appendChild(card);
  });

  document.getElementById('active-video').style.display = 'none';
}

// Play selected item in large view
function playVideo(title, url, type = 'video', item = null) {
  const frameContainer = document.getElementById('active-video-frame');
  let embedCode = '';

  // Calculate iframe height based on screen width for videos and books
  const screenWidth = window.innerWidth;
  const iframeHeight = screenWidth < 768 ? '300px' : screenWidth < 1024 ? '400px' : '600px';

  if (type === 'book' && item) {
    embedCode = `
      <iframe class="scribd_iframe_embed" 
              title="${title}" 
              src="${url}" 
              width="100%" 
              height="${iframeHeight}" 
              frameborder="0" 
              scrolling="no"></iframe>
      <p class="scribd-attribution">
        <a href="${item.documentUrl}" target="_blank" style="color: #098642; text-decoration: underline;">${title}</a> by 
        <a href="${item.authorUrl}" target="_blank" style="color: #098642; text-decoration: underline;">${item.author}</a>
      </p>
    `;
  } else if (type === 'movie') {
    embedCode = `
      <div class="movie-placeholder active">
        <h3>${title}</h3>
        <p>This movie is available on an external website. Click below to watch:</p>
        <a href="${url}" target="_blank" class="movie-link active">Watch ${title} Now</a>
      </div>
    `;
  } else {
    embedCode = `
      <iframe src="${url}" 
              width="100%" 
              height="${iframeHeight}" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen></iframe>
    `;
  }

  document.getElementById('active-video-title').innerText = title;
  frameContainer.innerHTML = embedCode;
  document.getElementById('active-video').style.display = 'block';
  document.getElementById('active-video').scrollIntoView({ behavior: 'smooth' });
}

// Toggle light/dark mode
function toggleTheme() {
  const html = document.getElementById('html-root');
  const currentTheme = html.getAttribute('data-theme');
  const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
  html.setAttribute('data-theme', newTheme);
  
  const button = document.querySelector('.theme-toggle');
  button.innerText = newTheme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
  
  localStorage.setItem('theme', newTheme);
}

// Restore saved theme on page load
window.onload = function() {
  const savedTheme = localStorage.getItem('theme') || 'light';
  document.getElementById('html-root').setAttribute('data-theme', savedTheme);
  const button = document.querySelector('.theme-toggle');
  button.innerText = savedTheme === 'dark' ? '☀️ Light Mode' : '🌙 Dark Mode';
};

// Handle window resize to adjust iframe heights
window.addEventListener('resize', () => {
  const activeFrame = document.querySelector('#active-video iframe');
  if (activeFrame) {
    const screenWidth = window.innerWidth;
    const newHeight = screenWidth < 768 ? '300px' : screenWidth < 1024 ? '400px' : '600px';
    activeFrame.style.height = newHeight;
  }
});